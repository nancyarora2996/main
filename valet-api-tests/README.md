**# Valet API Tests**

This project is a lightweight API automation framework built using Cypress with TypeScript. It tests the [Bank of Canada Valet API](https://www.bankofcanada.ca/valet/docs) and validates both positive and negative scenarios. The primary objective is to calculate the average Forex conversion rate for "CAD to USD" over the recent 10 weeks using the observations endpoint. Additional tests for other currency pairs and the groups endpoint have been added to demonstrate code reusability and extensive error handling.

**## Features**

- **API Testing:** Automated tests against the Bank of Canada Valet API.
- **Modular and Reusable Code:** Includes helper functions for date formatting and calculating averages.
- **Comprehensive Scenarios:** Covers both positive cases (valid inputs) and negative cases (e.g., invalid series codes, incorrect date ranges, server errors).
- **Multiple Currency Support:** Easily extended tests for various currency pairs (e.g., CAD to USD, CAD to EUR).
- **HTML Reporting:** Generates detailed test reports using [cypress-mochawesome-reporter](https://www.npmjs.com/package/cypress-mochawesome-reporter) with embedded screenshots.
- **Global Configurations:** Centralized error handling and logging in the Cypress support file.

**##Project Structure**
**cypress/e2e**: Where the test files (e.g., series.spec.ts and groups.spec.ts) are stored.
**cypress/support:** Contains global configuration files (e.g., e2e.ts) and can include custom commands.
**cypress.config.ts**: Contains Cypress configuration, including settings for base URL and reporters.
**Other files**: Such as package.json and tsconfig.json that manage project metadata and TypeScript settings.


**##Reports and Logs**
**HTML Reports:** Generated by the configured reporter, which includes details like embedded screenshots on failure.
**Logs:** Mentions that logs can be added using cy.log() and that global logging may be set up in the support file.

**Test Scenarios**
**Series Tests:** Explain both positive scenarios (like calculating averages for valid currency pairs) and negative scenarios (like invalid series codes or date ranges).
**Groups Tests:** Explain that the groups endpoint is validated for correct response structure, and also includes negative tests (e.g., invalid URL or parameters).

## Potential Enhancements

- **CI/CD Integration:**  
  Automate the execution of tests by integrating with continuous integration tools like GitHub Actions, GitLab CI, or Jenkins. This would run your tests on every push or pull request, ensuring that regressions are caught early.

- **Expanded Negative Testing:**  
  Enhance test coverage by adding additional negative scenarios, such as:
  - Testing invalid or missing query parameters.
  - Sending unexpected data types in requests.
  - Simulating timeouts or network issues.
  - Verifying behavior when rate limits are exceeded (if applicable).

- **Parameterization and Data-Driven Testing:**  
  Externalize test data (e.g., currency pairs, date ranges) using environment variables or external JSON/CSV files. This allows tests to run with multiple sets of data without changing the code.

- **Custom Commands and Utilities:**  
  Develop reusable custom commands in `cypress/support/commands.ts` to simplify common tasks (e.g., setting request headers, authentication, logging). This will help keep your test files cleaner and more maintainable.

- **Enhanced Reporting:**  
  Explore additional reporting options beyond Mochawesome, such as integrating with Allure or other third-party tools, to provide more detailed insights into test performance and failures.

- **Performance Testing:**  
  Consider adding performance testing capabilities by measuring response times, throughput, and other key performance indicators. This can help identify bottlenecks in the API.

- **Extended API Coverage:**  
  Add tests for additional endpoints provided by the Bank of Canada Valet API, such as:
  - Verifying data from other endpoints (e.g., indicators, statistics).
  - Testing endpoints with different response formats (e.g., XML if supported).
  - Checking for proper handling of large datasets.

- **Error Handling and Retry Logic:**  
  Implement mechanisms to automatically retry failed API calls, especially for transient network issues, and enhance error reporting to make debugging easier.

- **Documentation and Code Comments:**  
  Improve inline documentation and comments within test files and configuration files to ensure the code is easily understandable for new contributors.

- **Security Testing:**  
  Extend your framework to include basic security tests, such as verifying proper authentication and authorization mechanisms, and ensuring that sensitive information is not exposed in API responses.
